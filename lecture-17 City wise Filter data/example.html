<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Object</title>
</head>

<body>
    <h2 align="center">View User</h2>

    <div align="center">
        <select onchange="filterCity()" id="city">
            <option value="">---select---</option>
            <option value="surat">surat</option>
            <option value="vapi">vapi</option>
            <option value="rajkot">rajkot</option>
        </select>
    </div><br>

    <table border="1" cellpadding="10" align="center">
        <thead>
            <tr>
                <th>ID</th>
                <th>Email</th>
                <th>Country</th>
                <th>State</th>
                <th>City</th>
                <th>Course</th>
                <th>Address</th>
                <th>Age</th>
                <th>Gender</th>
                <th>Phone</th>
                <th>God</th>
            </tr>
        </thead>
        <tbody id="users">

        </tbody>
    </table>
</body>

</html>

<script>

    const details = [
        {
            name: "jay",
            email: "jay@gmail.com",
            country: "bharat",
            state: "gujarat",
            city: "vapi",
            course: "full stack developement",
            address: "abc nagar surat",
            age: 23,
            gender: "male",
            phone: "0123456789",
            god: ["mahadev", "bramha", "vishnu", "ganpati"]
        },
        {
            name: "ajay",
            email: "ajay@gmail.com",
            country: "bharat",
            state: "gujarat",
            city: "surat",
            course: "web developement",
            address: "xyz nagar surat",
            age: 21,
            gender: "male",
            phone: "03456789",
            god: ["mahadev", "bramha", "vishnu", "ganpati"]
        },
        {
            name: "vijay",
            email: "vijay@gmail.com",
            country: "bharat",
            state: "gujarat",
            city: "rajkot",
            course: "app developement",
            address: "pqr nagar surat",
            age: 22,
            gender: "male",
            phone: "03456789",
            god: ["mahadev", "bramha", "vishnu", "ganpati"]
        },
        {
            name: "vijay",
            email: "vijay@gmail.com",
            country: "bharat",
            state: "gujarat",
            city: "rajkot",
            course: "app developement",
            address: "pqr nagar surat",
            age: 22,
            gender: "male",
            phone: "03456789",
            god: ["mahadev", "bramha", "vishnu", "ganpati"]
        }
    ]

    let filterData = [];

    const viewRecord = (data) => {

        let tbl = "";
        if (data) {
            data.map((val, index) => {
                tbl += `
                        <tr>
                            <td>${++index}</td>
                            <td>${val.name}</td>
                            <td>${val.email}</td>
                            <td>${val.country}</td>
                            <td>${val.city}</td>
                            <td>${val.course}</td>
                            <td>${val.address}</td>
                            <td>${val.age}</td>
                            <td>${val.gender}</td>
                            <td>${val.phone}</td>
                            <td>
                                <table border="1" cellpadding="5">`
                val.god.map((g, i) => {
                    tbl += `
                                                    <tr>
                                                        <td>${++i}</td>
                                                        <td>${g}</td>
                                                    </tr>
                                                `
                })

            })

            filterData = tbl;
            document.getElementById("users").innerHTML = filterData;
            // } else {
            //     details.map((val, index) => {
            //         tbl += `
            //                 <tr>
            //                     <td>${++index}</td>
            //                     <td>${val.name}</td>
            //                     <td>${val.email}</td>
            //                     <td>${val.country}</td>
            //                     <td>${val.city}</td>
            //                     <td>${val.course}</td>
            //                     <td>${val.address}</td>
            //                     <td>${val.age}</td>
            //                     <td>${val.gender}</td>
            //                     <td>${val.phone}</td>
            //                     <td>
            //                         <table border="1" cellpadding="5">`
            //         val.god.map((g, i) => {
            //             tbl += `
            //                                             <tr>
            //                                                 <td>${++i}</td>
            //                                                 <td>${g}</td>
            //                                             </tr>
            //                                         `
            //         })
            //         tbl += `</table>    
            //                     </td>
            //                 </tr>
            //             `
            //     })
            filterData = tbl;
            document.getElementById("users").innerHTML = filterData;
        }

    }
    viewRecord();



    const filterCity = () => {
        let city = document.getElementById('city').value;
        let d = details.filter(val => val.city === city);
        filterData = d;
        viewRecord(filterData);
    }


</script>